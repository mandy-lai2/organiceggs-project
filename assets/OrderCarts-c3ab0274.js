import{_ as k,m as _,f as x,r as p,o as i,c as r,b as c,w as b,a as t,F as m,h as T,t as e,j as g,k as y,d as a,D as w}from"./index-56eba1de.js";import{c as v}from"./cartStore-933d64bc.js";import{l as L}from"./loadingStore-b73227ed.js";import{L as V}from"./LoadingAnimation-6ffff200.js";import"./sweetalert2.all-c9effd99.js";const $={methods:{toThousands(s){return parseInt(s,10).toFixed(0)}}},N={data(){return{tempCoupon:""}},computed:{..._(v,["carts"]),..._(L,["isLoading"]),countDiscount(){return this.toThousands(this.carts.total)-this.toThousands(this.carts.final_total)}},components:{LoadingAnimation:V},mixins:[$],methods:{...x(v,["getCarts","updateCart","delCart","sentCoupon"]),copyCoupon(){navigator.clipboard.writeText("555"),alert("已複製")}},mounted(){this.getCarts()}},q=t("header",null,[t("div",{class:"bgImageCover pageBanner d-flex flex-column justify-content-center align-items-start"},[t("div",null,[t("h2",{class:"py-3"},[a("購物車"),t("span",{class:"text-uppercase"},"Cart")]),t("hr",{class:"border border-maincolor border-2 opacity-100"})])])],-1),D=t("section",null,[t("div",{class:"container my-6"},[t("div",{class:"position-relative m-4 orderProgress"},[t("div",{class:"progress",style:{height:"2px"}},[t("div",{class:"progress-bar",role:"progressbar","aria-valuenow":"33","aria-valuemin":"0","aria-valuemax":"100"})]),t("button",{class:"position-absolute top-0 start-0 translate-middle btn btn-lg btn-buttonbg rounded-pill py-0"},[t("i",{class:"bi bi-cart3"}),t("span",{class:"text-maingray"},"購物車 ")]),t("button",{class:"position-absolute top-0 start-33 translate-middle btn btn-lg btn-secondarylight rounded-pill py-0"},[t("i",{class:"bi bi-pencil"}),t("span",{class:"text-maingray"},"填寫資料")]),t("button",{class:"position-absolute top-0 start-66 translate-middle btn btn-lg btn-secondarylight rounded-pill py-0"},[t("i",{class:"bi bi-check-lg"}),t("span",{class:"text-maingray"},"付款方式")]),t("button",{class:"position-absolute top-0 start-100 translate-middle btn btn-lg btn-secondarylight rounded-pill py-0"},[t("i",{class:"bi bi-clipboard-check"}),t("span",{class:"text-maingray"},"訂單完成")])])])],-1),A={class:"container mt-5"},B={class:"table-responsive-lg"},S={class:"table align-middle"},U=t("thead",{class:"border-top"},[t("tr",null,[t("th",{scope:"col"}),t("th",{scope:"col"},"商品"),t("th",{scope:"col"},"價格"),t("th",{scope:"col"},"小計"),t("th",{scope:"col"},"刪除")])],-1),F={scope:"row",class:"w-sm-50"},I=["src","alt"],j=t("br",null,null,-1),M={class:"btn-group",role:"group"},E=["onClick"],O=["onUpdate:modelValue","onChange"],P=["onClick"],Q={class:"text-decoration-line-through text-mainred"},z={key:0,class:"text-success"},G=["onClick"],H=t("i",{class:"bi bi-trash3-fill"},null,-1),J=[H],K={key:1},R=t("h3",null,"快去選購商品吧~",-1),W=[R],X={class:"vstack gap-3 text-end my-4 totalInfo"},Y={class:"border-bottom"},Z={class:"hstack"},tt={class:"input-group mb-3 w-50"},ot={class:"ms-auto text-mainred"},st={class:"fw-bolder"},nt={class:"container my-5"},et={class:"hstack gap-3"},at={class:"ms-auto"};function lt(s,n,it,rt,d,u){const C=p("LoadingAnimation"),f=p("VLoading"),h=p("router-link");return i(),r(m,null,[c(f,{active:s.isLoading},{default:b(()=>[c(C)]),_:1},8,["active"]),q,D,t("section",null,[t("div",A,[t("div",B,[t("table",S,[U,t("tbody",null,[s.carts.carts.length?(i(!0),r(m,{key:0},T(s.carts.carts,o=>(i(),r("tr",{key:o.id},[t("th",F,[t("img",{class:"max-width-130 w-100",src:o.product.imageUrl,alt:o.product.title},null,8,I)]),t("td",null,[a(e(o.product.title),1),j,t("div",M,[t("button",{type:"button",class:"btn btn-outline-maingreen",onClick:l=>s.updateCart(o.id,o.product.id,o.qty-1)},"-",8,E),g(t("input",{min:"1",type:"number",class:"border border-maingreen productQty btn","onUpdate:modelValue":l=>o.qty=l,onChange:l=>s.updateCart(o.id,o.product.id,o.qty)},null,40,O),[[y,o.qty,void 0,{number:!0}]]),t("button",{type:"button",class:"btn btn-outline-maingreen",onClick:l=>s.updateCart(o.id,o.product.id,o.qty+1)},"+",8,P)])]),t("td",null,[t("div",Q,"NT$"+e(o.product.origin_price),1),a(" NT$"+e(o.product.price),1)]),t("td",null,[a("NT$"+e(s.toThousands(o.final_total))+" ",1),o.coupon?(i(),r("div",z,"已套用優惠券")):w("",!0)]),t("td",null,[t("button",{type:"button",class:"btn btn-outline-mainred",onClick:l=>s.delCart(o.id)},J,8,G)])]))),128)):(i(),r("tr",K,W))])])]),t("div",X,[t("div",Y,"總金額: $"+e(s.toThousands(s.carts.total)),1),t("div",Z,[t("div",tt,[g(t("input",{type:"text",class:"form-control",placeholder:"優惠碼","aria-label":"coupon","aria-describedby":"couponText","onUpdate:modelValue":n[0]||(n[0]=o=>d.tempCoupon=o)},null,512),[[y,d.tempCoupon]]),t("button",{class:"btn btn-secondary",type:"button",id:"coupon",onClick:n[1]||(n[1]=o=>s.sentCoupon(d.tempCoupon))},"輸入優惠券")]),t("div",ot," 優惠折抵: $"+e(u.countDiscount),1)]),t("button",{type:"button",class:"btn btn-link w-fit",onClick:n[2]||(n[2]=(...o)=>u.copyCoupon&&u.copyCoupon(...o))},"優惠券代碼:555 (點擊即可複製)"),t("div",st,"應付金額: $"+e(s.toThousands(s.carts.final_total)),1)])])]),t("section",null,[t("div",nt,[t("div",et,[t("div",null,[c(h,{to:"/products",class:"btn btn-outline-buttonbg"},{default:b(()=>[a("繼續購物")]),_:1})]),t("div",at,[c(h,{to:"/order/subscriber",class:"btn btn-buttonbg"},{default:b(()=>[a("下一步")]),_:1})])])])])],64)}const ht=k(N,[["render",lt]]);export{ht as default};
